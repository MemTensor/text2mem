# Text2Mem Bench 测试样本生成计划

# ==================== 总体配置 ====================
plan:
  name: "samples_by_proportion"
  description: "按比例分配的测试样本生成计划"
  version: "3.0"
  
  # 总目标数量
  total_samples: 2000
  
  # 每次LLM调用生成的数量
  batch_size: 10
  
  # Context长度配置
  min_context_length: 100
  max_context_length: 350
  
  # 断点恢复
  resume_from_checkpoint: true
  checkpoint_file: "bench/generate/output/.checkpoint_{plan_name}.json"

# ==================== 场景比例配置 ====================
scenario_proportions:
  incident_postmortem: 0.25    # 25% - 故障复盘
  meeting_notes: 0.25          # 25% - 会议记录
  project_tracking: 0.25       # 25% - 项目跟踪
  knowledge_base: 0.25         # 25% - 知识库

# ==================== 操作比例配置 ====================
operation_proportions:
  # 核心操作 - 40%
  encode: 0.20        # 20% - 编码/记录
  retrieve: 0.12      # 12% - 检索
  summarize: 0.08     # 8%  - 摘要
  
  # 标签和更新 - 25%
  label: 0.12         # 12% - 标签
  update: 0.13        # 13% - 更新

  # 生命周期管理 - 20%
  promote: 0.08       # 8%  - 提升
  demote: 0.07        # 7%  - 降级
  delete: 0.05        # 5%  - 删除
  
  # 高级操作 - 15%
  lock: 0.04          # 4%  - 锁定
  merge: 0.04         # 4%  - 合并
  split: 0.04         # 4%  - 拆分
  expire: 0.03        # 3%  - 过期

# ==================== 操作配置 ====================
operations:
  encode:
    enabled: true
    description: "编码/写入记忆"
  
  retrieve:
    enabled: true
    description: "语义检索"
  
  label:
    enabled: true
    description: "添加标签"
  
  update:
    enabled: true
    description: "更新字段"
  
  delete:
    enabled: true
    description: "删除记录"
  
  promote:
    enabled: true
    description: "提升优先级"
  
  demote:
    enabled: true
    description: "降级/归档"
  
  lock:
    enabled: true
    description: "锁定保护"
  
  merge:
    enabled: true
    description: "合并记录"
  
  split:
    enabled: true
    description: "拆分记录"
  
  expire:
    enabled: true
    description: "设置过期"
  
  summarize:
    enabled: true
    description: "生成摘要"

# ==================== 场景定义 ====================
scenarios:
  incident_postmortem:
    name: "故障复盘"
    name_en: "Incident Postmortem"
    enabled: true
  
  meeting_notes:
    name: "会议记录"
    name_en: "Meeting Notes"
    enabled: true
  
  project_tracking:
    name: "项目跟踪"
    name_en: "Project Tracking"
    enabled: true
  
  knowledge_base:
    name: "知识库"
    name_en: "Knowledge Base"
    enabled: true

# ==================== 样本特征分布 ====================
characteristics:
  # 指令风格
  instruction_style:
    direct: 85%         # 直接指令
    indirect: 15%       # 间接指令
  
  # 结构复杂度
  structure:
    single: 90%         # 单操作
    workflow: 10%       # 多操作工作流
  
  # 语言分布
  lang:
    zh: 0%            # 中文
    en: 100%            # 英文

# ==================== LLM配置 ====================
llm:
  provider: "openai"
  model: "gpt-4o"
  api_key_env: "OPENAI_API_KEY"
  base_url: ""
  
  temperature: 0.7
  max_tokens: 4000
  timeout: 120

# ==================== 三阶段配置 ====================
stages:
  stage1_nl_generation:
    enabled: true
    temperature: 0.7
    max_tokens: 4000
    batch_size: 8
  
  stage2_ir_generation:
    enabled: true
    temperature: 0.5
    max_tokens: 4000
    batch_size: 1
  
  stage3_expected_generation:
    enabled: true
    temperature: 0.5
    max_tokens: 4000
    batch_size: 1

# ==================== 输出配置 ====================
output:
  base_dir: "bench/data/raw"  # 输出到data/raw/目录
  format: "jsonl"
  keep_intermediate: true

# ==================== 日志配置 ====================
logging:
  level: "INFO"
  file: "bench/output/logs/generation.log"
  console: true

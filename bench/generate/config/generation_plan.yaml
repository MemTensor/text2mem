# Text2Mem Bench æµ‹è¯•æ ·æœ¬ç”Ÿæˆè®¡åˆ’ - æŒ‰æ¯”ä¾‹åˆ†é…ï¼ˆv2.3ï¼‰
# åœºæ™¯å‡ç­‰åˆ†é… + æ“ä½œæ¯”ä¾‹æ§åˆ¶ + workflowæ¯”ä¾‹

# ==================== æ€»ä½“é…ç½® ====================
plan:
  name: "samples_by_proportion"
  description: "æŒ‰æ¯”ä¾‹åˆ†é…çš„æµ‹è¯•æ ·æœ¬ç”Ÿæˆè®¡åˆ’ - åœºæ™¯å‡ç­‰ Ã— æ“ä½œæ¯”ä¾‹ Ã— workflowæ¯”ä¾‹"
  version: "2.3"
  
  # æ€»ç›®æ ‡æ•°é‡
  total_samples: 2000
  
  # æ¯æ¬¡LLMè°ƒç”¨ç”Ÿæˆçš„æ•°é‡ï¼ˆStage1å»ºè®®5-10ï¼ŒStage2/3å»ºè®®1ï¼‰
  batch_size: 10
  
  # Contexté•¿åº¦é…ç½®
  min_context_length: 100
  max_context_length: 350
  
  # æ–­ç‚¹æ¢å¤
  resume_from_checkpoint: true
  checkpoint_file: "bench/generate/output/.checkpoint_{plan_name}.json"

# ==================== â­ åœºæ™¯æ¯”ä¾‹é…ç½® ====================
# åœºæ™¯å‡ç­‰åˆ†é…ï¼ˆ4ä¸ªåœºæ™¯ï¼Œæ¯ä¸ª25%ï¼‰
scenario_proportions:
  incident_postmortem: 0.25    # 25% - æ•…éšœå¤ç›˜
  meeting_notes: 0.25          # 25% - ä¼šè®®è®°å½•
  project_tracking: 0.25       # 25% - é¡¹ç›®è·Ÿè¸ª
  knowledge_base: 0.25         # 25% - çŸ¥è¯†åº“
  # æ€»å’Œ = 1.0 (100%)

# ==================== â­ æ“ä½œæ¯”ä¾‹é…ç½® ====================
# è®¾ç½®å„æ“ä½œçš„æ¯”ä¾‹ï¼ˆæ€»å’Œåº”ä¸º1.0æˆ–100%ï¼‰
operation_proportions:
  # æ ¸å¿ƒæ“ä½œ - å 40%
  encode: 0.20        # 20% - ç¼–ç /è®°å½•
  retrieve: 0.12      # 12% - æ£€ç´¢
  summarize: 0.08     # 8%  - æ‘˜è¦
  
  # æ ‡ç­¾å’Œæ›´æ–° - å 25%
  label: 0.12         # 12% - æ ‡ç­¾
  update: 0.13        # 13% - æ›´æ–°

  # ç”Ÿå‘½å‘¨æœŸç®¡ç† - å 20%
  promote: 0.08       # 8%  - æå‡
  demote: 0.07        # 7%  - é™çº§
  delete: 0.05        # 5%  - åˆ é™¤
  
  # é«˜çº§æ“ä½œ - å 15%
  lock: 0.04          # 4%  - é”å®š
  merge: 0.04         # 4%  - åˆå¹¶
  split: 0.04         # 4%  - æ‹†åˆ†
  expire: 0.03        # 3%  - è¿‡æœŸ
  # æ€»å’Œ = 1.0 (100%)

# ==================== æ“ä½œé…ç½®è¯¦æƒ… ====================
# è¡¥å……æ“ä½œçš„å…ƒæ•°æ®ï¼ˆä¸å½±å“æ•°é‡åˆ†é…ï¼‰
operations:
  encode:
    lang: zh
    enabled: true
    priority: 1
    description: "ç¼–ç /å†™å…¥è®°å¿†"
  
  retrieve:
    lang: zh
    enabled: true
    priority: 1
    description: "è¯­ä¹‰æ£€ç´¢"
  
  label:
    lang: zh
    enabled: true
    priority: 2
    description: "æ·»åŠ æ ‡ç­¾"
  
  update:
    lang: zh
    enabled: true
    priority: 2
    description: "æ›´æ–°å­—æ®µ"
  
  delete:
    lang: zh
    enabled: true
    priority: 2
    description: "åˆ é™¤è®°å½•"
  
  promote:
    lang: zh
    enabled: true
    priority: 2
    description: "æå‡ä¼˜å…ˆçº§"
  
  demote:
    lang: zh
    enabled: true
    priority: 2
    description: "é™çº§/å½’æ¡£"
  
  lock:
    lang: zh
    enabled: true
    priority: 3
    description: "é”å®šä¿æŠ¤"
  
  merge:
    lang: zh
    enabled: true
    priority: 3
    description: "åˆå¹¶è®°å½•"
  
  split:
    lang: zh
    enabled: true
    priority: 3
    description: "æ‹†åˆ†è®°å½•"
  
  expire:
    lang: zh
    enabled: true
    priority: 3
    description: "è®¾ç½®è¿‡æœŸ"
  
  summarize:
    lang: zh
    enabled: true
    priority: 2
    description: "ç”Ÿæˆæ‘˜è¦"

# ==================== åœºæ™¯å®šä¹‰ ====================
scenarios:
  incident_postmortem:
    name: "æ•…éšœå¤ç›˜"
    name_en: "Incident Postmortem"
    description: "SREäº‹ä»¶å¤„ç†å’Œå¤ç›˜åœºæ™¯"
    enabled: true
  
  meeting_notes:
    name: "ä¼šè®®è®°å½•"
    name_en: "Meeting Notes"
    description: "ä¼šè®®çºªè¦å’Œè®¨è®ºè®°å½•"
    enabled: true
  
  project_tracking:
    name: "é¡¹ç›®è·Ÿè¸ª"
    name_en: "Project Tracking"
    description: "é¡¹ç›®ç®¡ç†å’Œè¿›åº¦è·Ÿè¸ª"
    enabled: true
  
  knowledge_base:
    name: "çŸ¥è¯†åº“"
    name_en: "Knowledge Base"
    description: "çŸ¥è¯†ç®¡ç†å’Œæ–‡æ¡£æ•´ç†"
    enabled: true

# ==================== æ ·æœ¬ç‰¹å¾åˆ†å¸ƒ ====================
characteristics:
  # æŒ‡ä»¤é£æ ¼
  instruction_style:
    direct: 85%         # ç›´æ¥æŒ‡ä»¤ï¼š"è®°å½•ä¼šè®®çºªè¦"
    indirect: 15%       # é—´æ¥æŒ‡ä»¤ï¼š"æŠŠåˆšæ‰æåˆ°çš„å†…å®¹å­˜ä¸€ä¸‹"
  
  # ç»“æ„å¤æ‚åº¦
  structure:
    single: 90%         # å•æ“ä½œ
    workflow: 10%       # å¤šæ“ä½œå·¥ä½œæµï¼ˆ2-5ä¸ªæ“ä½œï¼‰
  
  # è¯­è¨€åˆ†å¸ƒ
  lang:
    zh: 50%            # å…¨ä¸­æ–‡
    en: 50%

# ==================== LLMé…ç½® ====================
llm:
  provider: "openai"
  model: "gpt-4o"
  api_key_env: "OPENAI_API_KEY"
  base_url: ""
  
  # ç”Ÿæˆå‚æ•°
  temperature: 0.7
  max_tokens: 4000
  timeout: 120

# ==================== ä¸‰é˜¶æ®µé…ç½® ====================
stages:
  stage1_nl_generation:
    enabled: true
    temperature: 0.7
    max_tokens: 4000
    batch_size: 8  # Stage1æ¯æ‰¹ç”Ÿæˆ8ä¸ªï¼ˆæé«˜æ•ˆç‡ï¼‰
  
  stage2_ir_generation:
    enabled: true
    temperature: 0.5
    max_tokens: 4000
    batch_size: 1  # Stage2æ¯æ¬¡ç”Ÿæˆ1ä¸ªï¼ˆç¡®ä¿å‡†ç¡®ï¼‰
  
  stage3_expected_generation:
    enabled: true
    temperature: 0.5
    max_tokens: 4000
    batch_size: 1  # Stage3æ¯æ¬¡ç”Ÿæˆ1ä¸ªï¼ˆç¡®ä¿å‡†ç¡®ï¼‰

# ==================== è¾“å‡ºé…ç½® ====================
output:
  base_dir: "bench/generate/output"
  format: "jsonl"
  patterns:
    stage1: "{plan_name}_stage1_{timestamp}.json"
    stage2: "{plan_name}_stage2_{timestamp}.jsonl"
    stage3: "{plan_name}_stage3_{timestamp}.jsonl"
  keep_intermediate: true
  validate_after_stage: false

# ==================== éªŒè¯é…ç½® ====================
validation:
  validate_after_each_stage: false
  on_validation_error: "warn"

# ==================== æ—¥å¿—é…ç½® ====================
logging:
  level: "INFO"
  file: "bench/generate/output/generation.log"
  console: true

# ==================== ä½¿ç”¨è¯´æ˜ ====================
# 
# ğŸ“Š è‡ªåŠ¨è®¡ç®—ç¤ºä¾‹ï¼ˆæ€»æ ·æœ¬æ•° = 120ï¼‰:
#
# åœºæ™¯åˆ†é…:
#   incident_postmortem: 120 Ã— 0.25 = 30
#   meeting_notes:       120 Ã— 0.35 = 42
#   project_tracking:    120 Ã— 0.25 = 30
#   knowledge_base:      120 Ã— 0.15 = 18
#
# æ“ä½œåˆ†é…:
#   encode:    120 Ã— 0.25 = 30
#   retrieve:  120 Ã— 0.20 = 24
#   label:     120 Ã— 0.08 = 10
#   update:    120 Ã— 0.12 = 14
#   ...
#
# æ¯ä¸ª(åœºæ™¯, æ“ä½œ)ç»„åˆçš„æ•°é‡ = æ€»æ•° Ã— åœºæ™¯æ¯”ä¾‹ Ã— æ“ä½œæ¯”ä¾‹
# ä¾‹å¦‚: (meeting_notes, encode) = 120 Ã— 0.35 Ã— 0.25 = 10.5 â‰ˆ 11
#
# ğŸ’¡ è°ƒæ•´æ¯”ä¾‹:
# 1. ä¿®æ”¹ scenario_proportions ä¸­çš„å€¼ï¼ˆæ€»å’Œ=1.0ï¼‰
# 2. ä¿®æ”¹ operation_proportions ä¸­çš„å€¼ï¼ˆæ€»å’Œ=1.0ï¼‰
# 3. ä¿®æ”¹ total_samples æ”¹å˜æ€»æ•°
#
# ğŸš€ è¿è¡Œ:
# python bench/generate/generate.py \
#   --plan bench/generate/config/generation_plan_by_operations.yaml

